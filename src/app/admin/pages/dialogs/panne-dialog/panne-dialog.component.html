<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '5px',fullScreenBackdrop:true }"></ngx-loading>
<h2 mat-dialog-title>{{panne.id? 'Modification du': 'Nouveau'}} Panne</h2>
<div mat-dialog-content>
    <form #elementForm="ngForm" name="form">
        <br/>
        <div class="row">
            <div class="col-md-12 col-lg-12">
                <mat-form-field class="full-width">
                    <mat-label>Affectation</mat-label>
                    <mat-select name="affectation" [(ngModel)]="panne.affectation" required>
                        <div class=select-search-input>
                            <input matInput type="text" name="affectationFilter" focused="'true'" [(ngModel)]="affectationFilter.nom" type="text" autocomplete="off" placeholder="Search ...">
                            <span class="span-icon-filter">
                                <i class="fa fa-search"></i>
                            </span>
                        </div>
                        <mat-divider></mat-divider>
                        <mat-option [value]="">Deselectionnez
                            <button class="btn btn-deselect btn-sm button-deselect">X</button>
                        </mat-option>
                        <mat-option *ngFor="let affectation of affectations | filterBy: affectationFilter" [value]="affectation">
                            {{affectation.materiel.nom}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="full-width">
                    <input matInput name="libelle" type="text" placeholder="Libelle" [(ngModel)]="panne.libelle" required />
                </mat-form-field>
                <mat-form-field class="full-width">
                    <input matInput name="type" type="text" placeholder="Type" [(ngModel)]="panne.type" required />
                </mat-form-field>
                <mat-form-field class="full-width">
                    <input matInput [matDatepicker]="datePanne" [(ngModel)]="panne.datePanne" name="datePanne" placeholder="Date Panne" readonly />
                    <mat-datepicker-toggle matSuffix [for]="datePanne">
                    </mat-datepicker-toggle>
                    <mat-datepicker #datePanne></mat-datepicker>
                </mat-form-field>
            </div>
        </div>
    </form>
</div>

<div mat-dialog-actions align="center">
    <button mat-dialog-close class="btn btn-close btn-sm btn-rounded mr-1" (click)="onNoClick()">
        <i class="mdi mdi-close"></i> Fermer
    </button>
    <button [disabled]="!elementForm.form.valid" class="btn btn-light btn-sm btn-rounded" (click)="save()">
        <i class="mdi mdi-content-save"></i> Enregistrer
    </button>
</div>